(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e){e.classList.add("popup_is-opened"),document.addEventListener("keydown",r)}function n(e){e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",r)}function r(e){"Escape"===e.key&&n(document.querySelector(".popup_is-opened"))}function o(e){e.currentTarget===e.target&&n(e.currentTarget)}e.d({},{OP:()=>q});var c,u={url:"https://mesto.nomoreparties.co/v1/wff-cohort-7",headers:{authorization:"a352596f-0f9a-4dc8-80c9-98649cf73952","Content-Type":"application/json"}};function i(e,t,n,r){a(t,e)?(n.classList.remove("card__like-button_is-active"),function(e){fetch("".concat(u.url,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:u.headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}(r)):(n.classList.add("card__like-button_is-active"),function(e){fetch("".concat(u.url,"/cards/").concat(e,"/likes"),{method:"PUT",headers:u.headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}(r))}var a=function(e,t){return t.find((function(t){return t._id===e}))};function l(e,n,r,o,u,i,a,l,s){var d=q.querySelector(".places__item").cloneNode(!0),p=d.querySelector(".card__image"),f=d.querySelector(".card__title");p.src=e,p.alt=n,f.textContent=n;var _=d.querySelector(".card__delete-button");i!==o&&(_.style.display="none");var y=document.querySelector(".popup_type_delete");return _.addEventListener("click",(function(){y.dataset.idcard=u,c=d,t(y)})),y.querySelector(".popup__button").addEventListener("click",(function(){return a(y.dataset.idcard)})),d.querySelector(".card__like-button").addEventListener("click",(function(){l(r,o,d,u)})),p.addEventListener("click",(function(){return s(p,f)})),d}function s(e){var t=document.querySelector(".popup_type_delete"),r=t.querySelector(".popup__button");r.textContent="Удаление...",function(e){return fetch("".concat(u.url,"/cards/").concat(e),{method:"DELETE",headers:u.headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}(e).then((function(){c.remove(),n(t)})).catch((function(e){console.log(e)})).finally((function(){r.textContent="Да"}))}var d=".popup__input",p=".popup__button",f="popup__button_disabled",_="popup__input_type_error",y="popup__error_visible",m=function(e,t){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(_),n.classList.remove(y),n.textContent=" "},v=function(e,t){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.disabled=!1,t.classList.remove(f)):(t.disabled=!0,t.classList.add(f))},h=function(e){var t=Array.from(e.querySelectorAll(d)),n=e.querySelector(p);t.forEach((function(t){m(e,t),t.setCustomValidity(" ")})),v(t,n)};function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var q=document.querySelector("#card-template").content,b=document.querySelector(".places__list"),k=document.querySelector(".popup_type_edit"),E=document.querySelector(".popup_type_new-card"),L=document.querySelector(".popup_type_image"),g=document.querySelector(".popup_type_delete"),C=document.querySelector(".popup_type_avatar"),j=document.querySelector(".profile__edit-button"),x=document.querySelector(".profile__add-button"),A=document.querySelector(".profile__image"),P=k.querySelector(".popup__close"),T=E.querySelector(".popup__close"),O=L.querySelector(".popup__close"),w=g.querySelector(".popup__close"),D=C.querySelector(".popup__close"),N=k.querySelector(".popup__input_type_name"),I=k.querySelector(".popup__input_type_description"),J=C.querySelector(".popup__input_type_avatar"),M=document.querySelector(".profile__title"),V=document.querySelector(".profile__description"),H=document.querySelector(".profile__image"),U={};function z(e,n){var r=document.querySelector(".popup_type_image"),o=document.querySelector(".popup__image"),c=document.querySelector(".popup__caption");o.src=e.src,o.alt=e.alt,c.textContent=n.textContent,t(r)}Promise.all([fetch("".concat(u.url,"/users/me"),{method:"GET",headers:u.headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})),fetch("".concat(u.url,"/cards"),{headers:u.headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c,u,i=[],a=!0,l=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;a=!1}else for(;!(a=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{if(!a&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],c=r[1];U.name=o.name,U.about=o.about,U.src=o.avatar,U.id=o._id,function(e){M.textContent=e.name,V.textContent=e.about,H.setAttribute("style","background-image: url(".concat(e.src,");"))}(U),c.forEach((function(e){var t=l(e.link,e.name,e.likes,U.id,e._id,e.owner._id,s,i,z);b.append(t),e.likes.length>0&&(document.querySelector(".card__like-number").textContent=e.likes.length,a(U.id,e.likes)&&t.querySelector(".card__like-button").classList.add("card__like-button_is-active"))}))})).catch((function(e){console.log(e)})),j.addEventListener("click",(function(){k.querySelector(".popup__input_type_name").value=document.querySelector(".profile__title").innerText,k.querySelector(".popup__input_type_description").value=document.querySelector(".profile__description").innerText,h(k),t(k)})),x.addEventListener("click",(function(){h(E),t(E)})),A.addEventListener("click",(function(){return t(C)})),P.addEventListener("click",(function(){return n(k)})),T.addEventListener("click",(function(){return n(E)})),O.addEventListener("click",(function(){return n(L)})),w.addEventListener("click",(function(){return n(g)})),D.addEventListener("click",(function(){return n(C)})),L.addEventListener("click",(function(e){o(e)})),k.addEventListener("click",(function(e){o(e)})),E.addEventListener("click",(function(e){o(e)})),g.addEventListener("click",(function(e){o(e)})),C.addEventListener("click",(function(e){o(e)})),k.addEventListener("submit",(function(e){e.preventDefault();var t=N.value,r=I.value,o=C.querySelector(".popup__button");o.textContent="Сохранение...",function(e,t){return fetch("".concat(u.url,"/users/me"),{method:"PATCH",headers:u.headers,body:JSON.stringify({name:e,about:t})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}(t,r).then((function(){M.textContent=t,V.textContent=r,n(k)})).catch((function(e){console.log(e)})).finally((function(){o.textContent="Сохранить"}))})),C.addEventListener("submit",(function(e){e.preventDefault();var t,r=J.value,o=C.querySelector(".popup__button");o.textContent="Сохранение...",(t=r,fetch("".concat(u.url,"/users/me/avatar"),{method:"PATCH",headers:u.headers,body:JSON.stringify({avatar:t})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))).then((function(){H.setAttribute("style","background-image: url(".concat(r,");")),n(C)})).catch((function(e){console.log(e)})).finally((function(){o.textContent="Сохранить"}))}));var G=document.querySelector(".popup_type_new-card"),$=G.querySelector(".popup__input_type_card-name"),B=G.querySelector(".popup__input_type_url");G.addEventListener("submit",(function(e){var t=this;e.preventDefault();var r=$.value,o=B.value,c=G.querySelector(".popup__button");c.textContent="Сохранение...",function(e,t){return fetch("".concat(u.url,"/cards"),{method:"POST",headers:u.headers,body:JSON.stringify({name:e,link:t})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}(r,o).then((function(){var e=l(o,r,t.likes,U.id,t._id,U.id,s,i,z);b.prepend(e),n(G),$.value="",B.value=""})).catch((function(e){console.log(e)})).finally((function(){c.textContent="Сохранить"}))})),Array.from(document.querySelectorAll(".popup__form")).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),function(e){var t=Array.from(e.querySelectorAll(d)),n=e.querySelector(p);v(t,n),t.forEach((function(r){r.addEventListener("input",(function(){(function(e,t){t.validity.patternMismatch?t.setCustomValidity("Разрешены только латинские, кириллические буквы, знаки дефиса и пробелы"):t.setCustomValidity(""),t.validity.valid?m(e,t):function(e,t,n){var r=e.querySelector(".".concat(t.id,"-error"));t.classList.add(_),r.textContent=n,r.classList.add(y)}(e,t,t.validationMessage)})(e,r),v(t,n)}))}))}(e)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBa0I5RSxFQUNwQixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC1mZi93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0LWZmL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0LWZmL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC1mZi8uL3NyYy9jb21wb25lbnRzL21vZGFsLmpzIiwid2VicGFjazovL21lc3RvLXByb2plY3QtZmYvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC1mZi8uL3NyYy9jb21wb25lbnRzL2NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC1mZi8uL3NyYy9jb21wb25lbnRzL3ZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC1mZi8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8v0YDQsNCx0L7RgtCwINGBINC80L7QtNCw0LvRjNC90YvQvNC4INC+0LrQvdCw0LzQuFxuZXhwb3J0IGZ1bmN0aW9uIG9wZW5Qb3B1cChwb3B1cCkge1xuICBwb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfaXMtb3BlbmVkXCIpO1xuICAvL9C+0LHRgNCw0LHQvtGC0YfQuNC6INGB0L7QsdGL0YLQuNGPIC0g0L3QsNC20LDRgtC40LUgRVNDIC0g0LTQvtCx0LDQstC70Y/QtdC8XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGNsb3NlUG9wdXBFc2MpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xvc2VQb3B1cChwb3B1cCkge1xuICBwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfaXMtb3BlbmVkXCIpO1xuICAvL9C+0LHRgNCw0LHQvtGC0YfQuNC6INGB0L7QsdGL0YLQuNGPINGD0LTQsNC70Y/QtdC8XG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGNsb3NlUG9wdXBFc2MpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xvc2VQb3B1cEVzYyhldnQpIHtcbiAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICBjbG9zZVBvcHVwKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfaXMtb3BlbmVkXCIpKTtcbiAgfVxufVxuXG4vL9GE0YPQvdC60YbQuNGPINC30LDQutGA0YvRgtC40Y8g0L/QviDQutC70LjQutGDINC90LAg0J7QstC10YDQu9C10LlcbmV4cG9ydCBmdW5jdGlvbiBjbG9zZVBvcHVwT3ZlcmxheShldnQpIHtcbiAgaWYgKGV2dC5jdXJyZW50VGFyZ2V0ID09PSBldnQudGFyZ2V0KSB7XG4gICAgY2xvc2VQb3B1cChldnQuY3VycmVudFRhcmdldCk7XG4gIH1cbn1cbiIsImNvbnN0IGNvbmZpZyA9IHtcbiAgdXJsOiBcImh0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS93ZmYtY29ob3J0LTdcIixcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IFwiYTM1MjU5NmYtMGY5YS00ZGM4LTgwYzktOTg2NDljZjczOTUyXCIsXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gIH0sXG59O1xuLyrQvtCx0YDQsNCx0L7RgtC60LAg0L7RgtCy0LXRgtCwINGB0LXRgNCy0LXRgNCwXG5oYW5kbGVSZXMocmVzKSB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cblxuICAgICAgLy8g0LXRgdC70Lgg0L7RiNC40LHQutCwLCDQvtGC0LrQu9C+0L3Rj9C10Lwg0L/RgNC+0LzQuNGBXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICAgIH07Ki9cblxuLy8g0J/QvtC70YPRh9C10L3QuNC1INC60LDRgNGC0L7Rh9C60LhcbmV4cG9ydCBjb25zdCBnZXRDYXJkID0gKCkgPT4ge1xuICByZXR1cm4gZmV0Y2goYCR7Y29uZmlnLnVybH0vY2FyZHNgLCB7IGhlYWRlcnM6IGNvbmZpZy5oZWFkZXJzIH0pLnRoZW4oXG4gICAgKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cblxuICAgICAgLy8g0LXRgdC70Lgg0L7RiNC40LHQutCwLCDQvtGC0LrQu9C+0L3Rj9C10Lwg0L/RgNC+0LzQuNGBXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICAgIH1cbiAgKTtcbn07XG5cbi8v0L/QvtC70YPRh9C10L3QuNC1INC60LDRgNGC0L7Rh9C10Log0YEg0YHQtdGA0LLQtdGA0LBcbmV4cG9ydCBjb25zdCBnZXRJbml0aWFsQ2FyZHMgPSAoKSA9PiB7XG4gIHJldHVybiBmZXRjaChgJHtjb25maWcudXJsfS9jYXJkc2AsIHtcbiAgICBoZWFkZXJzOiBjb25maWcuaGVhZGVycyxcbiAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfVxuXG4gICAgLy8g0LXRgdC70Lgg0L7RiNC40LHQutCwLCDQvtGC0LrQu9C+0L3Rj9C10Lwg0L/RgNC+0LzQuNGBXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgfSk7XG59O1xuXG4vLyDQv9C+0LvRg9GH0LXQvdC40LUg0LTQsNC90L3Ri9GFINC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtSDRgSDRgdC10YDQstC10YDQsFxuXG5leHBvcnQgY29uc3QgZ2V0SW5mb1VzZXIgPSAoKSA9PiB7XG4gIHJldHVybiBmZXRjaChgJHtjb25maWcudXJsfS91c2Vycy9tZWAsIHtcbiAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgaGVhZGVyczogY29uZmlnLmhlYWRlcnMsXG4gIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgIGlmIChyZXMub2spIHtcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH1cblxuICAgIC8vINC10YHQu9C4INC+0YjQuNCx0LrQsCwg0L7RgtC60LvQvtC90Y/QtdC8INC/0YDQvtC80LjRgVxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XG4gIH0pO1xufTtcblxuLy8g0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjQtSDQtNCw0L3QvdGL0YUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXG5leHBvcnQgY29uc3QgZWRpdEluZm9Vc2VyID0gKG5hbWUsIGFib3V0KSA9PiB7XG4gIHJldHVybiBmZXRjaChgJHtjb25maWcudXJsfS91c2Vycy9tZWAsIHtcbiAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICBoZWFkZXJzOiBjb25maWcuaGVhZGVycyxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICBuYW1lOiBuYW1lLFxuICAgICAgYWJvdXQ6IGFib3V0LFxuICAgIH0pLFxuICB9KS50aGVuKChyZXMpID0+IHtcbiAgICBpZiAocmVzLm9rKSB7XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9XG5cbiAgICAvLyDQtdGB0LvQuCDQvtGI0LjQsdC60LAsINC+0YLQutC70L7QvdGP0LXQvCDQv9GA0L7QvNC40YFcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICB9KTtcbn07XG5cbi8vINGB0L7Qt9C00LDQvdC40LUg0LrQsNGA0YLQvtGH0LXQulxuZXhwb3J0IGNvbnN0IGNyZWF0ZU5ld0NhcmQgPSAobmFtZSwgbGluaykgPT4ge1xuICByZXR1cm4gZmV0Y2goYCR7Y29uZmlnLnVybH0vY2FyZHNgLCB7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICBoZWFkZXJzOiBjb25maWcuaGVhZGVycyxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICBuYW1lOiBuYW1lLFxuICAgICAgbGluazogbGluayxcbiAgICB9KSxcbiAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfVxuXG4gICAgLy8g0LXRgdC70Lgg0L7RiNC40LHQutCwLCDQvtGC0LrQu9C+0L3Rj9C10Lwg0L/RgNC+0LzQuNGBXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgfSk7XG59O1xuXG4vLyDRg9C00LDQu9C10L3QuNC1INC60LDRgNGC0L7Rh9C60LhcbmV4cG9ydCBjb25zdCByZW1vdmVDYXJkID0gKGNhcmRJZCkgPT4ge1xuICByZXR1cm4gZmV0Y2goYCR7Y29uZmlnLnVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xuICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICBoZWFkZXJzOiBjb25maWcuaGVhZGVycyxcbiAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfVxuXG4gICAgLy8g0LXRgdC70Lgg0L7RiNC40LHQutCwLCDQvtGC0LrQu9C+0L3Rj9C10Lwg0L/RgNC+0LzQuNGBXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgfSk7XG59O1xuXG4vLyDQn9C+0YHRgtCw0LLQuNGC0Ywg0LvQsNC50LpcbmV4cG9ydCBjb25zdCBhZGRMaWtlID0gKGNhcmRJZCkgPT4ge1xuICByZXR1cm4gZmV0Y2goYCR7Y29uZmlnLnVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xuICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICBoZWFkZXJzOiBjb25maWcuaGVhZGVycyxcbiAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfVxuXG4gICAgLy8g0LXRgdC70Lgg0L7RiNC40LHQutCwLCDQvtGC0LrQu9C+0L3Rj9C10Lwg0L/RgNC+0LzQuNGBXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgfSk7XG59O1xuXG4vLyDQo9Cx0YDQsNGC0Ywg0LvQsNC50LpcbmV4cG9ydCBjb25zdCBkZWxldGVMaWtlID0gKGNhcmRJZCkgPT4ge1xuICByZXR1cm4gZmV0Y2goYCR7Y29uZmlnLnVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xuICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICBoZWFkZXJzOiBjb25maWcuaGVhZGVycyxcbiAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfVxuXG4gICAgLy8g0LXRgdC70Lgg0L7RiNC40LHQutCwLCDQvtGC0LrQu9C+0L3Rj9C10Lwg0L/RgNC+0LzQuNGBXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgfSk7XG59O1xuXG4vLyDQuNC30LzQtdC90LXQvdC40LUg0LDQstCw0YLQsNGA0LBcbmV4cG9ydCBjb25zdCBlZGl0QXZhdGFyID0gKHNyYykgPT4ge1xuICByZXR1cm4gZmV0Y2goYCR7Y29uZmlnLnVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgIGhlYWRlcnM6IGNvbmZpZy5oZWFkZXJzLFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIGF2YXRhcjogc3JjLFxuICAgIH0pLFxuICB9KS50aGVuKChyZXMpID0+IHtcbiAgICBpZiAocmVzLm9rKSB7XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9XG5cbiAgICAvLyDQtdGB0LvQuCDQvtGI0LjQsdC60LAsINC+0YLQutC70L7QvdGP0LXQvCDQv9GA0L7QvNC40YFcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICB9KTtcbn07XG4iLCJpbXBvcnQgeyBjYXJkVGVtcGxhdGUgfSBmcm9tIFwiLi4vcGFnZXMvaW5kZXhcIjtcbmltcG9ydCB7IGFkZExpa2UsIGRlbGV0ZUxpa2UsIHJlbW92ZUNhcmQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGlcIjtcbmltcG9ydCB7IG9wZW5Qb3B1cCwgY2xvc2VQb3B1cCB9IGZyb20gXCIuL21vZGFsXCI7XG5cbmxldCBkZWxDYXJkcztcblxuLy/RhNGD0L3QutGG0LjRjyBsaWtlINGE0L7RgtC+XG5leHBvcnQgZnVuY3Rpb24gbGlrZUJ1dHRvbihsaWtlcywgaWQsIGNhcmRFbGVtZW50LCBjYXJkSWQpIHtcbiAgaWYgKGlzTGlrZXNNZShpZCwgbGlrZXMpKSB7XG4gICAgY2FyZEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImNhcmRfX2xpa2UtYnV0dG9uX2lzLWFjdGl2ZVwiKTtcbiAgICBkZWxldGVMaWtlKGNhcmRJZCk7XG4gIH0gZWxzZSB7XG4gICAgY2FyZEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2lzLWFjdGl2ZVwiKTtcbiAgICBhZGRMaWtlKGNhcmRJZCk7XG4gIH1cbn1cblxuLy8g0L/RgNC+0LLQtdGA0Y/QtdC8INC70LDQudC60Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXG5leHBvcnQgY29uc3QgaXNMaWtlc01lID0gKGlkLCBsaWtlcykgPT4ge1xuICByZXR1cm4gbGlrZXMuZmluZChmdW5jdGlvbiAoaXRlbSkge1xuICAgIHJldHVybiBpdGVtLl9pZCA9PT0gaWQ7XG4gIH0pO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNhcmQoXG4gIGxpbmssXG4gIG5hbWUsXG4gIGxpa2VzLFxuICBpZFVzZXIsXG4gIGNhcmRJZCxcbiAgb3duZXJJZCxcbiAgZGVsZXRlQ2FsbEJhY2ssXG4gIGxpa2VJbWFnZSxcbiAgb3BlbkltYWdlXG4pIHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkVGVtcGxhdGVcbiAgICAucXVlcnlTZWxlY3RvcihcIi5wbGFjZXNfX2l0ZW1cIilcbiAgICAuY2xvbmVOb2RlKHRydWUpO1xuXG4gIGNvbnN0IGNhcmRJbWFnZSA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gIGNvbnN0IGNhcmRUaXRsZSA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XG5cbiAgY2FyZEltYWdlLnNyYyA9IGxpbms7XG4gIGNhcmRJbWFnZS5hbHQgPSBuYW1lO1xuICBjYXJkVGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xuXG4gIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKTtcbiAgLy8g0LXRgdC70Lgg0LrQsNGA0YLQvtGH0LrQsCDRgdC+0LfQtNCw0L3QsCDQvdC1INC80L3QvtC5INGC0L4g0YHQutGA0YvRgtGMINGN0LvQtdC80LXQvdGCINC60L7RgNC30LjQvdGLXG4gIGlmIChvd25lcklkICE9PSBpZFVzZXIpIHtcbiAgICBkZWxldGVCdXR0b24uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICB9XG5cbiAgLy/Qv9C+0L/QsNC/INC/0L7QtNGC0LLQtdGA0LbQtNC10L3QuNGPINGD0LTQsNC70LXQvdC40Y9cbiAgY29uc3QgcG9wdXBDb25maXJtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2RlbGV0ZVwiKTtcbiAgLy/Qv9GA0Lgg0L3QsNC20LDRgtC40Lgg0L3QsCDQutC+0YDQt9C40L3RgyDQvtGC0LrRgNGL0LLQsNC10Lwg0L7QutC90L4g0L/QvtC00YLQstC10YDQttC00LXQvdC40Y8g0YPQtNCw0LvQtdC90LjRj1xuICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBwb3B1cENvbmZpcm0uZGF0YXNldC5pZGNhcmQgPSBjYXJkSWQ7XG4gICAgZGVsQ2FyZHMgPSBjYXJkRWxlbWVudDtcbiAgICBvcGVuUG9wdXAocG9wdXBDb25maXJtKTtcbiAgfSk7XG5cbiAgLy/Rg9C00LDQu9C10L3QuNC1INC60LDRgNGC0L7Rh9C60Lgg0L/QvtGB0LvQtSDQv9C+0LTRgtCy0LXRgNC20LTQtdC90LjRj1xuICBjb25zdCBkZWxldGVDb25maXJtQnV0dG9uID0gcG9wdXBDb25maXJtLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2J1dHRvblwiKTtcbiAgZGVsZXRlQ29uZmlybUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cbiAgICBkZWxldGVDYWxsQmFjayhwb3B1cENvbmZpcm0uZGF0YXNldC5pZGNhcmQpXG4gICk7XG5cbiAgLy/Qu9Cw0LnQutCw0LXQvCDQuNC30L7QsdGA0LDQttC10L3QuNGPXG4gIC8v0YDQtdCw0LPQuNGA0YPQtdC8INC90LAg0LrQu9C40Log0L/QviDQutC90L7Qv9C60LUg0YEg0YHQtdGA0LTQtdGH0LrQvtC8XG4gIGNvbnN0IGxpa2VDYXJkQnV0dG9uID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcbiAgbGlrZUNhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBsaWtlSW1hZ2UobGlrZXMsIGlkVXNlciwgY2FyZEVsZW1lbnQsIGNhcmRJZCk7XG4gIH0pO1xuXG4gIC8v0LTQvtCx0LDQstC70Y/QtdC8INC60LDRgNGC0L7Rh9C60YMg0LIgcG9wdXAg0L/RgNC4INC90LDQttCw0YLQuNC4INC90LAg0LrQsNGA0YLQuNC90LrRgyDQvtGC0LrRgNGL0LLQsNC10LwgcG9wdXBcbiAgY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBvcGVuSW1hZ2UoY2FyZEltYWdlLCBjYXJkVGl0bGUpKTtcblxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XG59XG5cbi8vIEB0b2RvOiDQpNGD0L3QutGG0LjRjyDRg9C00LDQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60LhcbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVDYXJkKGNhcmRJZCkge1xuICAvL9C/0L7Qv9Cw0L8g0L/QvtC00YLQstC10YDQttC00LXQvdC40Y8g0YPQtNCw0LvQtdC90LjRj1xuICBjb25zdCBwb3B1cENvbmZpcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfZGVsZXRlXCIpO1xuICBjb25zdCBkZWxldGVDb25maXJtQnV0dG9uID0gcG9wdXBDb25maXJtLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2J1dHRvblwiKTtcbiAgZGVsZXRlQ29uZmlybUJ1dHRvbi50ZXh0Q29udGVudCA9IFwi0KPQtNCw0LvQtdC90LjQtS4uLlwiO1xuICByZW1vdmVDYXJkKGNhcmRJZClcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICBkZWxDYXJkcy5yZW1vdmUoKTtcbiAgICAgIGNsb3NlUG9wdXAocG9wdXBDb25maXJtKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgZGVsZXRlQ29uZmlybUJ1dHRvbi50ZXh0Q29udGVudCA9IFwi0JTQsFwiO1xuICAgIH0pO1xuXG4gIC8vIHJlbW92ZUNhcmQoY2FyZElkKTsgIC8v0YPQtNCw0LvRj9C10Lwg0LrQsNGA0YLQvtGH0LrRg1xufVxuIiwiLy8g0LLQutC70Y7Rh9C10L3QuNC1INCy0LDQu9C40LTQsNGG0LjQuCDQstGL0LfQvtCy0L7QvCBlbmFibGVWYWxpZGF0aW9uXG4vLyDQstGB0LUg0L3QsNGB0YLRgNC+0LnQutC4INC/0LXRgNC10LTQsNGO0YLRgdGPINC/0YDQuCDQstGL0LfQvtCy0LVcblxuLy8g0LLQsNC70LjQtNCw0YbQuNGPINGE0L7RgNC8XG5jb25zdCBjb25maWdWYWxpZGF0aW9uID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIixcbn07XG5cbmNvbnN0IHNob3dFcnJvciA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpID0+IHtcbiAgLy/QvtGI0LjQsdC60LAsINC60L7RgtC+0YDQsNGPINC90LDQudC00LXQvdCwINCy0L3Rg9GC0YDQuCBmb3JtRWxlbWVudFxuICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gIC8v0LrQu9Cw0YHRgSDQvtGI0LjQsdC60Lgg0Y3Qu9C10LzQtdC90YLQsCBpbnB1dFxuICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZChjb25maWdWYWxpZGF0aW9uLmlucHV0RXJyb3JDbGFzcyk7XG4gIC8v0KPRgdGC0LDQvdC+0LLQuNC8IGVycm9yTWVzc2FnZSDQsiDQutCw0YfQtdGB0YLQstC1INC30L3QsNGH0LXQvdC40Y8gdGV4dENvbnRlbnQg0LTQu9GPIGZvcm1FcnJvci5cbiAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICAvL9CU0L7QsdCw0LLQuNC8IGVycm9yQ2xhc3Mg0LrQu9Cw0YHRgSDQstC40LTQuNC80L7RgdGC0Lgg0L7RiNC40LHQutC4XG4gIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKGNvbmZpZ1ZhbGlkYXRpb24uZXJyb3JDbGFzcyk7XG59O1xuXG5jb25zdCBoaWRlRXJyb3IgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCkgPT4ge1xuICAvL9C+0YjQuNCx0LrQsCwg0LrQvtGC0L7RgNCw0Y8g0L3QsNC50LTQtdC90LAg0LLQvdGD0YLRgNC4IGZvcm1FbGVtZW50XG4gIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgLy8g0YPQtNCw0LvQuNGC0Ywg0LrQu9Cw0YHRgSDQvtGI0LjQsdC60Lgg0YEg0Y3Qu9C10LzQtdC90YLQsCBpbnB1dFxuICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjb25maWdWYWxpZGF0aW9uLmlucHV0RXJyb3JDbGFzcyk7XG4gIC8v0KPQtNCw0LvQuNC8INCw0LrRgtC40LLQvdGL0Lkg0LrQu9Cw0YHRgSDQvtGI0LjQsdC60LggYyBlcnJvckNsYXNzLlxuICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjb25maWdWYWxpZGF0aW9uLmVycm9yQ2xhc3MpO1xuICAvLyDQntGH0LjRgdGC0LjQvCDQvtGI0LjQsdC60YNcbiAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCIgXCI7XG59O1xuXG4vL9C/0YDQvtCy0LXRgNC60LAg0L/QvtC70Y8g0LLQstC+0LTQsCDQvdCwINC60L7RgNGA0LXQutGC0L3QvtGB0YLRjFxuLy9mb3JtRWxlbWVudCAtINGE0L7RgNC80LAg0L/RgNC+0LLQtdGA0LrQuFxuLy9pbnB1dEVsZW1lbnQgLSDQv9C+0LvQtSDQv9GA0L7QstC10YDQutC4XG5jb25zdCBjaGVja0lucHV0VmFsaWRpdHkgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCkgPT4ge1xuICAvL9C00LXQu9C+INCyINC/0LDRgtGC0LXRgNC90LU/XG4gIGlmIChpbnB1dEVsZW1lbnQudmFsaWRpdHkucGF0dGVybk1pc21hdGNoKSB7XG4gICAgLy8g0LLRgdGC0YDQvtC10L3QvdGL0Lkg0LzQtdGC0L7QtCBzZXRDdXN0b21WYWxpZGl0eSDQv9GA0LjQvdC40LzQsNC10YIg0L3QsCDQstGF0L7QtCDRgdGC0YDQvtC60YNcbiAgICAvLyDQuCDQt9Cw0LzQtdC90Y/QtdGCINC10Y4g0YHRgtCw0L3QtNCw0YDRgtC90L7QtSDRgdC+0L7QsdGJ0LXQvdC40LUg0L7QsSDQvtGI0LjQsdC60LVcbiAgICBpbnB1dEVsZW1lbnQuc2V0Q3VzdG9tVmFsaWRpdHkoXG4gICAgICBcItCg0LDQt9GA0LXRiNC10L3RiyDRgtC+0LvRjNC60L4g0LvQsNGC0LjQvdGB0LrQuNC1LCDQutC40YDQuNC70LvQuNGH0LXRgdC60LjQtSDQsdGD0LrQstGLLCDQt9C90LDQutC4INC00LXRhNC40YHQsCDQuCDQv9GA0L7QsdC10LvRi1wiXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICAvLyDQvdC1INCyINC/0LDRgtGC0LXRgNC90LVcbiAgICAvLyDQvtGB0YLQsNCy0LvRj9C10Lwg0YHRgtCw0L3QtNCw0YDRgtC90YvQtSDQsdGA0LDRg9C30LXRgNC90YvQtSDRgdC+0L7QsdGJ0LXQvdC40Y9cbiAgICBpbnB1dEVsZW1lbnQuc2V0Q3VzdG9tVmFsaWRpdHkoXCJcIik7XG4gIH1cbiAgLy8g0L3QtSDQv9GA0L7RiNC70L4g0L/RgNC+0LLQtdGA0LrRg1xuICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgIC8v0L7RiNC40LHQutCwXG4gICAgc2hvd0Vycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gIH0gZWxzZSB7XG4gICAgLy/QstGB0LUg0L7QulxuICAgIGhpZGVFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50KTtcbiAgfVxufTtcblxuLy/QstGL0Y/RgdC90LjQvCAtINCV0YHRgtGMINC70Lgg0LfQtNC10YHRjCDRhdC+0YLRjyDQsdGLINC+0LTQvdC+INC/0L7Qu9C1LCDQutC+0YLQvtGA0L7QtSDQvdC1INC/0YDQvtGI0LvQviDQstCw0LvQuNC00LDRhtC40Y4/XG5jb25zdCBoYXNJbnZhbGlkSW5wdXQgPSAoaW5wdXRMaXN0KSA9PiB7XG4gIC8vINC/0YDQvtGF0L7QtNC40Lwg0L/QviDRjdGC0L7QvNGDINC80LDRgdGB0LjQstGDINC80LXRgtC+0LTQvtC8IHNvbWVcbiAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAvLyDQldGB0LvQuCDQv9C+0LvQtSDQvdC1INCy0LDQu9C40LTQvdC+LCDQutC+0LvQsdGN0Log0LLQtdGA0L3RkdGCIHRydWVcbiAgICAvLyDQntCx0YXQvtC0INC80LDRgdGB0LjQstCwINC/0YDQtdC60YDQsNGC0LjRgtGB0Y8g0Lgg0LLRgdGPINGE0YPQvdC60YbQuNGPXG4gICAgLy8gaGFzSW52YWxpZElucHV0INCy0LXRgNC90ZHRgiB0cnVlXG5cbiAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgfSk7XG59O1xuXG4vL9Cx0LvQvtC60LjRgNC+0LLQutCwINC60L3QvtC/0LrQuCDQsiDRgdC70YPRh9Cw0LUsINC10YHQu9C4INC/0YDQvtCy0LXRgNC60LAg0L3QtSDQv9GA0L7QudC00LXQvdCwINGE0L7RgNC80L7QuVxuY29uc3QgdG9nZ2xlQnV0dG9uU3RhdGUgPSAoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KSA9PiB7XG4gIC8vINCV0YHQu9C4INC10YHRgtGMINGF0L7RgtGPINCx0Ysg0L7QtNC40L0g0L3QtdCy0LDQu9C40LTQvdGL0Lkg0LjQvdC/0YPRglxuICBpZiAoaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcbiAgICAvLyDRgdC00LXQu9Cw0Lkg0LrQvdC+0L/QutGDINC90LXQsNC60YLQuNCy0L3QvtC5XG4gICAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKGNvbmZpZ1ZhbGlkYXRpb24uaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gIH0gZWxzZSB7XG4gICAgLy8g0LjQvdCw0YfQtSDRgdC00LXQu9Cw0Lkg0LrQvdC+0L/QutGDINCw0LrRgtC40LLQvdC+0LlcbiAgICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZ1ZhbGlkYXRpb24uaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gIH1cbn07XG5cbi8v0LTQvtCx0LDQstC70Y/QtdC8INGB0LvRg9GI0LDRgtC10LvQuCDQvdCwINCy0YHQtSDQv9C+0LvRjyDRhNC+0YDQvNGLXG5jb25zdCBzZXRFdmVudExpc3RlbmVycyA9IChmb3JtRWxlbWVudCkgPT4ge1xuICAvL9Cy0YHQtSDQv9C+0LvRjyDRhNC+0YDQvNGLINGBINC60LvQsNGB0YHQvtC8IGlucHV0U2VsZWN0b3JcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZ1ZhbGlkYXRpb24uaW5wdXRTZWxlY3RvcilcbiAgKTtcbiAgLy8g0J7QsdC+0LnQtNGR0Lwg0LLRgdC1INGN0LvQtdC80LXQvdGC0Ysg0L/QvtC70YPRh9C10L3QvdC+0Lkg0LrQvtC70LvQtdC60YbQuNC4XG4gIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgIGNvbmZpZ1ZhbGlkYXRpb24uc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgKTtcblxuICAvLyDRh9GC0L7QsdGLINC/0YDQvtCy0LXRgNC40YLRjCDRgdC+0YHRgtC+0Y/QvdC40LUg0LrQvdC+0L/QutC4INCyINGB0LDQvNC+0Lwg0L3QsNGH0LDQu9C1XG4gIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCk7XG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAvLyDQutCw0LbQtNC+0LzRgyDQv9C+0LvRjiDQtNC+0LHQsNCy0LjQvCDQvtCx0YDQsNCx0L7RgtGH0LjQuiDRgdC+0LHRi9GC0LjRjyBpbnB1dFxuICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgLy8g0JLQvdGD0YLRgNC4INC60L7Qu9Cx0Y3QutCwINCy0YvQt9C+0LLQtdC8IGlzVmFsaWQsXG4gICAgICAvLyDQv9C10YDQtdC00LDQsiDQtdC5INGE0L7RgNC80YMg0Lgg0L/RgNC+0LLQtdGA0Y/QtdC80YvQuSDRjdC70LXQvNC10L3RglxuICAgICAgY2hlY2tJbnB1dFZhbGlkaXR5KGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQpO1xuICAgICAgLy8g0YfRgtC+0LHRiyDQv9GA0L7QstC10YDRj9GC0Ywg0LXQs9C+INC/0YDQuCDQuNC30LzQtdC90LXQvdC40Lgg0LvRjtCx0L7Qs9C+INC40Lcg0L/QvtC70LXQuVxuICAgICAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG4vL9C+0YfQuNGB0YLQutCwINC+0YjQuNCx0L7QuiDQstCw0LvQuNC00LDRhtC40LggLSDQvdCwINC+0YLQutGA0YvRgtC40LUg0YTQvtGA0LzRi1xuZXhwb3J0IGNvbnN0IGNsZWFyVmFsaWRhdGlvbiA9IChmb3JtVmFsaWRhdGlvbikgPT4ge1xuICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgIGZvcm1WYWxpZGF0aW9uLnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnVmFsaWRhdGlvbi5pbnB1dFNlbGVjdG9yKVxuICApO1xuICBjb25zdCBidXR0b25FbGVtZW50ID0gZm9ybVZhbGlkYXRpb24ucXVlcnlTZWxlY3RvcihcbiAgICBjb25maWdWYWxpZGF0aW9uLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICk7XG4gIGlucHV0TGlzdC5mb3JFYWNoKChwb3B1cElucHV0KSA9PiB7XG4gICAgaGlkZUVycm9yKGZvcm1WYWxpZGF0aW9uLCBwb3B1cElucHV0KTtcbiAgICBwb3B1cElucHV0LnNldEN1c3RvbVZhbGlkaXR5KFwiIFwiKTtcbiAgfSk7XG5cbiAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KTtcbn07XG5cbi8vc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybUVsZW1lbnQpO1xuXG5leHBvcnQgY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9ICgpID0+IHtcbiAgLy/QstGB0LUg0YTQvtGA0LzRi1xuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWdWYWxpZGF0aW9uLmZvcm1TZWxlY3RvcilcbiAgKTtcbiAgLy8g0J/QtdGA0LXQsdC10YDRkdC8INGE0L7RgNC80YtcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgICBmb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuICAgIHNldEV2ZW50TGlzdGVuZXJzKGZvcm1FbGVtZW50KTtcbiAgfSk7XG59O1xuIiwiLy8gaW5kZXguanNcblxuaW1wb3J0IFwiLi4vaW5kZXguY3NzXCI7IC8vICDQuNC80L/QvtGA0YIg0LPQu9Cw0LLQvdC+0LPQviDRhNCw0LnQu9CwINGB0YLQuNC70LXQuVxuaW1wb3J0IHsgY2xvc2VQb3B1cE92ZXJsYXksIGNsb3NlUG9wdXAsIG9wZW5Qb3B1cCB9IGZyb20gXCIuLi9jb21wb25lbnRzL21vZGFsXCI7XG5pbXBvcnQge1xuICBjcmVhdGVDYXJkLFxuICBsaWtlQnV0dG9uLFxuICBpc0xpa2VzTWUsXG4gIGRlbGV0ZUNhcmQsXG59IGZyb20gXCIuLi9jb21wb25lbnRzL2NhcmRcIjtcbmltcG9ydCB7IGVuYWJsZVZhbGlkYXRpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy92YWxpZGF0aW9uXCI7XG5pbXBvcnQgeyBjbGVhclZhbGlkYXRpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy92YWxpZGF0aW9uXCI7XG5pbXBvcnQge1xuICBnZXRJbml0aWFsQ2FyZHMsXG4gIGdldEluZm9Vc2VyLFxuICBlZGl0SW5mb1VzZXIsXG4gIGNyZWF0ZU5ld0NhcmQsXG4gIGVkaXRBdmF0YXIsXG59IGZyb20gXCIuLi9jb21wb25lbnRzL0FwaVwiO1xuXG4vLyBAdG9kbzog0KLQtdC80L/Qu9C10LnRgiDQutCw0YDRgtC+0YfQutC4XG5jb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIikuY29udGVudDtcbi8vIEB0b2RvOiBET00g0YPQt9C70YtcbmNvbnN0IHBsYWNlQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wbGFjZXNfX2xpc3RcIik7XG4vL9C/0L7Qv9Cw0L8g0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQv9GA0L7RhNC40LvRj1xuY29uc3QgcG9wdXBFZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2VkaXRcIik7XG4vL9GE0L7RgNC80LAg0LTQvtCx0LDQstC70LXQvdC40Y8g0YTQvtGC0L5cbmNvbnN0IHBvcHVwQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX25ldy1jYXJkXCIpO1xuLy/Qv9C+0L/QsNC/INGBINGE0L7RgtC+XG5jb25zdCBwb3B1cEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2ltYWdlXCIpO1xuLy/Qv9C+0L/QsNC/INC/0L7QtNGC0LLQtdGA0LbQtNC10L3QuNGPINGD0LTQsNC70LXQvdC40Y9cbmNvbnN0IHBvcHVwQ29uZmlybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9kZWxldGVcIik7XG4vL9C/0L7Qv9Cw0L8g0YHQvNC10L3RiyDQsNCy0LDRgtCw0YDQsFxuY29uc3QgcG9wdXBBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfYXZhdGFyXCIpO1xuLy/QutC90L7Qv9C60LAg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQv9GA0L7RhNC40LvRj1xuY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XG4vL9C60L3QvtC/0LrQsCDQtNC+0LHQsNCy0LvQtdC90LjRjyDRhNC+0YLQvlxuY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuLy/QsNCy0LDRgtCw0YBcbmNvbnN0IGF2YXRhckVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlXCIpO1xuXG4vL9C60L3QvtC/0LrQsCDQt9Cw0LrRgNGL0YLQuNGPINC/0L7Qv9Cw0L/QsCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LjQu9GPXG5jb25zdCBjbG9zZUJ1dHRvbiA9IHBvcHVwRWRpdC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jbG9zZVwiKTtcbi8v0LrQvdC+0L/QutCwINC30LDQutGA0YvRgtC40Y8g0L/QvtC/0LDQv9CwINC00L7QsdCw0LLQu9C10L3QuNGPINGE0L7RgtC+XG5jb25zdCBjbG9zZUJ1dHRvbkFkZCA9IHBvcHVwQWRkLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlXCIpO1xuLy/QutC90L7Qv9C60LAg0LfQsNC60YDRi9GC0LjRjyDQv9C+0L/QsNC/INC60LDRgNGC0LjQvdC60LhcbmNvbnN0IGNsb3NlQnV0dG9uSW1hZ2UgPSBwb3B1cEltYWdlLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlXCIpO1xuLy/QutC90L7Qv9C60LAg0LfQsNC60YDRi9GC0LjRjyDQv9C+0L/QsNC/INC/0L7QtNGC0LLQtdGA0LbQtNC10L3QuNGPXG5jb25zdCBjbG9zZUJ1dHRvbkNvbmZpcm0gPSBwb3B1cENvbmZpcm0ucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2VcIik7XG4vL9C60L3QvtC/0LrQsCDQt9Cw0LrRgNGL0YLQuNGPINC/0L7Qv9Cw0L8g0L/QvtC00YLQstC10YDQttC00LXQvdC40Y9cbmNvbnN0IGNsb3NlQnV0dG9uQXZhdGFyID0gcG9wdXBBdmF0YXIucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2VcIik7XG5cbi8v0L/QvtC70Y8g0YTQvtGA0LzRiyDQsiBET00g0J/RgNC+0YTQuNC70YxcbmNvbnN0IG5hbWVJbnB1dCA9IHBvcHVwRWRpdC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF90eXBlX25hbWVcIik7XG5jb25zdCBqb2JJbnB1dCA9IHBvcHVwRWRpdC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF90eXBlX2Rlc2NyaXB0aW9uXCIpO1xuY29uc3QgbGlua0F2YXRhciA9IHBvcHVwQXZhdGFyLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2lucHV0X3R5cGVfYXZhdGFyXCIpO1xuXG4vL9CY0L3RhNC+0YDQvNCw0YbQuNGPINC/0YDQvtGE0LjQu9GPXG5jb25zdCBuYW1lUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdGl0bGVcIik7XG5jb25zdCBqb2JQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcbmNvbnN0IGF2YXRhclByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlXCIpO1xuXG5jb25zdCB1c2VySW5mbyA9IHt9O1xuXG4vL9C30LDQv9C+0LvQvdGP0LXQvCDQv9GA0L7RhNC40LvRjFxuZnVuY3Rpb24gc2V0UHJvZmlsZSh1c2VyKSB7XG4gIG5hbWVQcm9maWxlLnRleHRDb250ZW50ID0gdXNlci5uYW1lO1xuICBqb2JQcm9maWxlLnRleHRDb250ZW50ID0gdXNlci5hYm91dDtcbiAgYXZhdGFyUHJvZmlsZS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBgYmFja2dyb3VuZC1pbWFnZTogdXJsKCR7dXNlci5zcmN9KTtgKTtcbn1cblxuUHJvbWlzZS5hbGwoW2dldEluZm9Vc2VyKCksIGdldEluaXRpYWxDYXJkcygpXSlcbiAgLnRoZW4oKFt1c2VyLCBDYXJkc10pID0+IHtcbiAgICB1c2VySW5mby5uYW1lID0gdXNlci5uYW1lO1xuICAgIHVzZXJJbmZvLmFib3V0ID0gdXNlci5hYm91dDtcbiAgICB1c2VySW5mby5zcmMgPSB1c2VyLmF2YXRhcjtcbiAgICB1c2VySW5mby5pZCA9IHVzZXIuX2lkO1xuXG4gICAgc2V0UHJvZmlsZSh1c2VySW5mbyk7XG4gICAgQ2FyZHMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKFxuICAgICAgICBpdGVtLmxpbmssXG4gICAgICAgIGl0ZW0ubmFtZSxcbiAgICAgICAgaXRlbS5saWtlcyxcbiAgICAgICAgdXNlckluZm8uaWQsXG4gICAgICAgIGl0ZW0uX2lkLFxuICAgICAgICBpdGVtLm93bmVyLl9pZCxcbiAgICAgICAgZGVsZXRlQ2FyZCxcbiAgICAgICAgbGlrZUJ1dHRvbixcbiAgICAgICAgb3BlbkltYWdlXG4gICAgICApO1xuXG4gICAgICBwbGFjZUNvbnRhaW5lci5hcHBlbmQoY2FyZEVsZW1lbnQpO1xuICAgICAgaWYgKGl0ZW0ubGlrZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBsaWtlc0NvdW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLW51bWJlclwiKTtcbiAgICAgICAgbGlrZXNDb3VudC50ZXh0Q29udGVudCA9IGl0ZW0ubGlrZXMubGVuZ3RoO1xuICAgICAgICBpZiAoaXNMaWtlc01lKHVzZXJJbmZvLmlkLCBpdGVtLmxpa2VzKSkge1xuICAgICAgICAgIGNhcmRFbGVtZW50XG4gICAgICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxuICAgICAgICAgICAgLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlLWJ1dHRvbl9pcy1hY3RpdmVcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmxvZyhlcnIpOyAvLyDQstGL0LLQtdC00LXQvCDQvtGI0LjQsdC60YMg0LIg0LrQvtC90YHQvtC70YxcbiAgfSk7XG5cbmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgLy/Qt9Cw0L/QvtC70L3Rj9C10Lwg0L/QvtC70Y8g0YTQvtGA0LzRiyDQt9C90LDRh9C10L3QuNGP0LzQuCDQv9GA0L7RhNC40LvRj1xuICBwb3B1cEVkaXQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW5wdXRfdHlwZV9uYW1lXCIpLnZhbHVlID1cbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpLmlubmVyVGV4dDtcbiAgcG9wdXBFZGl0LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2lucHV0X3R5cGVfZGVzY3JpcHRpb25cIikudmFsdWUgPVxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIikuaW5uZXJUZXh0O1xuICBjbGVhclZhbGlkYXRpb24ocG9wdXBFZGl0KTtcbiAgb3BlblBvcHVwKHBvcHVwRWRpdCk7XG59KTtcbi8v0LXRgdC70Lgg0L3QsCDQutC90L7Qv9C60YMg0LTQvtCx0LDQstC70LXQvdC40Y8g0YTQvtGC0L4g0L3QsNC20LDQu9C4INC+0YLQutGA0YvQstCw0LXQvCDQv9C+0L/QsNC/XG5hZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY2xlYXJWYWxpZGF0aW9uKHBvcHVwQWRkKTtcbiAgb3BlblBvcHVwKHBvcHVwQWRkKTtcbn0pO1xuXG4vL9C+0YLQutGA0YvRgtGMINC+0LrQvdC+INGA0LXQtNCw0LrRgtC40YDQvtCy0LDRgtGMINCw0LLQsNGC0LDRgFxuYXZhdGFyRWRpdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gb3BlblBvcHVwKHBvcHVwQXZhdGFyKSk7XG5cbi8v0LXRgdC70Lgg0L3QsCDQutC90L7Qv9C60YMg0LfQsNC60YDRi9GC0LjRjyDRhNC+0YDQvNGLINC90LDQttCw0LvQuCDQt9Cw0LrRgNGL0LLQsNC10Lwg0L/QvtC/0LDQv1xuY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGNsb3NlUG9wdXAocG9wdXBFZGl0KSk7XG4vL9C10YHQu9C4INC90LAg0LrQvdC+0L/QutGDINC00L7QsdCw0LLQu9C10L3QuNGPINGE0L7RgtC+INC90LDQttCw0LvQuCDQt9Cw0LrRgNGL0LLQsNC10Lwg0L/QvtC/0LDQv1xuY2xvc2VCdXR0b25BZGQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGNsb3NlUG9wdXAocG9wdXBBZGQpKTtcbmNsb3NlQnV0dG9uSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGNsb3NlUG9wdXAocG9wdXBJbWFnZSkpO1xuY2xvc2VCdXR0b25Db25maXJtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBjbG9zZVBvcHVwKHBvcHVwQ29uZmlybSkpO1xuY2xvc2VCdXR0b25BdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGNsb3NlUG9wdXAocG9wdXBBdmF0YXIpKTtcblxuLy/QvtGC0YHQu9C10LbQuNCy0LDQtdC8INC90LDQttCw0YLQuNC1INC90LAg0L7QstC10YDQu9C10Lkg0L/QvtC/0LDQvyDQutCw0YDRgtC40L3QutC4XG5wb3B1cEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgY2xvc2VQb3B1cE92ZXJsYXkoZXZlbnQpO1xufSk7XG4vL9C30LDQutGA0YvQstCw0LXQvCDRhNC+0YDQvNGDINC90LDQttCw0YLQuNC10Lwg0L3QsCDQvtCy0LXRgNC70LXQuVxucG9wdXBFZGl0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgY2xvc2VQb3B1cE92ZXJsYXkoZXZlbnQpO1xufSk7XG5wb3B1cEFkZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gIGNsb3NlUG9wdXBPdmVybGF5KGV2ZW50KTtcbn0pO1xucG9wdXBDb25maXJtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgY2xvc2VQb3B1cE92ZXJsYXkoZXZlbnQpO1xufSk7XG5wb3B1cEF2YXRhci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gIGNsb3NlUG9wdXBPdmVybGF5KGV2ZW50KTtcbn0pO1xuXG4vL9C+0YLQutGA0YvQstCw0LXQvCDQvtC60L3QviDRgSDRhNC+0YLQvlxuZXhwb3J0IGZ1bmN0aW9uIG9wZW5JbWFnZShpbWFnZSwgdGl0bGUpIHtcbiAgLy/Qv9C+0L/QsNC/INGBINGE0L7RgtC+XG4gIGNvbnN0IHBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2ltYWdlXCIpO1xuICAvL9C60LDRgNGC0LjQvdC60LAg0LIg0L/QvtC/0LDQv1xuICBjb25zdCBwb3B1cEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2VcIik7XG4gIC8v0L7Qv9C40YHQsNC90LjQtSDQutCw0YDRgtC40L3QutC4INCyINC/0L7Qv9Cw0L9cbiAgY29uc3QgcG9wdXBDYXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2FwdGlvblwiKTtcbiAgLy/QtNC+0LHQsNCy0LvRj9C10Lwg0LrQsNGA0YLQuNC90LrRgyDQsiDQv9C+0L/QsNC/XG4gIHBvcHVwSW1hZ2Uuc3JjID0gaW1hZ2Uuc3JjO1xuICBwb3B1cEltYWdlLmFsdCA9IGltYWdlLmFsdDtcbiAgcG9wdXBDYXB0aW9uLnRleHRDb250ZW50ID0gdGl0bGUudGV4dENvbnRlbnQ7XG4gIC8v0L7RgtC60YDRi9Cy0LDQtdC8INC/0L7Qv9Cw0L9cbiAgb3BlblBvcHVwKHBvcHVwKTtcbn1cblxuLy/QsCDRgtC10L/QtdGA0Ywg0L/RgNC+INCh0L7RhdGA0LDQvdC40YLRjCFcblxuLy8g0J7QsdGA0LDQsdC+0YLRh9C40LogwqvQvtGC0L/RgNCw0LLQutC4wrsg0YTQvtGA0LzRi1xuZnVuY3Rpb24gY2hhbmdlUHJvZmlsZShldnQpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7IC8vINCt0YLQsCDRgdGC0YDQvtGH0LrQsCDQvtGC0LzQtdC90Y/QtdGCINGB0YLQsNC90LTQsNGA0YLQvdGD0Y4g0L7RgtC/0YDQsNCy0LrRgyDRhNC+0YDQvNGLLlxuXG4gIC8vINCf0L7Qu9GD0YfQuNGC0LUg0LfQvdCw0YfQtdC90LjQtSDQv9C+0LvQtdC5IGpvYklucHV0INC4IG5hbWVJbnB1dCDQuNC3INGB0LLQvtC50YHRgtCy0LAgdmFsdWVcbiAgY29uc3QgbmFtZSA9IG5hbWVJbnB1dC52YWx1ZTtcbiAgY29uc3Qgam9iID0gam9iSW5wdXQudmFsdWU7XG5cbiAgY29uc3QgZWRpdEluZm9CdXR0b24gPSBwb3B1cEF2YXRhci5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19idXR0b25cIik7XG4gIGVkaXRJbmZvQnV0dG9uLnRleHRDb250ZW50ID0gXCLQodC+0YXRgNCw0L3QtdC90LjQtS4uLlwiO1xuICAvLyDQktGB0YLQsNCy0LjRgtGMINC90L7QstC+0LUg0LfQvdCw0YfQtdC90LjQtVxuICBlZGl0SW5mb1VzZXIobmFtZSwgam9iKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIG5hbWVQcm9maWxlLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICAgIGpvYlByb2ZpbGUudGV4dENvbnRlbnQgPSBqb2I7XG4gICAgICBjbG9zZVBvcHVwKHBvcHVwRWRpdCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIGVkaXRJbmZvQnV0dG9uLnRleHRDb250ZW50ID0gXCLQodC+0YXRgNCw0L3QuNGC0YxcIjtcbiAgICB9KTtcbn1cblxuLy8g0J/RgNC40LrRgNC10L/Qu9GP0LXQvCDQvtCx0YDQsNCx0L7RgtGH0LjQuiDQuiDRhNC+0YDQvNC1OlxuLy8g0L7QvSDQsdGD0LTQtdGCINGB0LvQtdC00LjRgtGMINC30LAg0YHQvtCx0YvRgtC40LXQvCDigJxzdWJtaXTigJ0gLSDCq9C+0YLQv9GA0LDQstC60LDCu1xucG9wdXBFZGl0LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgY2hhbmdlUHJvZmlsZSk7XG5cbmZ1bmN0aW9uIGNoYW5nZUF2YXRhcihldnQpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7IC8vINCt0YLQsCDRgdGC0YDQvtGH0LrQsCDQvtGC0LzQtdC90Y/QtdGCINGB0YLQsNC90LTQsNGA0YLQvdGD0Y4g0L7RgtC/0YDQsNCy0LrRgyDRhNC+0YDQvNGLLlxuXG4gIC8vINCf0L7Qu9GD0YfQuNGC0LUg0LfQvdCw0YfQtdC90LjQtSDQv9C+0LvRjyBJbnB1dCDQuNC3INGB0LLQvtC50YHRgtCy0LAgdmFsdWVcbiAgY29uc3QgbGluayA9IGxpbmtBdmF0YXIudmFsdWU7XG4gIGNvbnN0IGVkaXRBdmF0YXJCdXR0b24gPSBwb3B1cEF2YXRhci5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19idXR0b25cIik7XG4gIGVkaXRBdmF0YXJCdXR0b24udGV4dENvbnRlbnQgPSBcItCh0L7RhdGA0LDQvdC10L3QuNC1Li4uXCI7XG4gIC8vINCS0YHRgtCw0LLQuNGC0Ywg0L3QvtCy0L7QtSDQt9C90LDRh9C10L3QuNC1XG4gIGVkaXRBdmF0YXIobGluaylcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICBhdmF0YXJQcm9maWxlLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIGBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJHtsaW5rfSk7YCk7XG4gICAgICBjbG9zZVBvcHVwKHBvcHVwQXZhdGFyKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgZWRpdEF2YXRhckJ1dHRvbi50ZXh0Q29udGVudCA9IFwi0KHQvtGF0YDQsNC90LjRgtGMXCI7XG4gICAgfSk7XG59XG5cbnBvcHVwQXZhdGFyLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgY2hhbmdlQXZhdGFyKTtcblxuLy/QsCDRgtC10L/QtdGA0Ywg0L/RgNC+INCU0L7QsdCw0LLQuNGC0Ywg0KTQvtGC0L4hXG4vLyDQndCw0YXQvtC00LjQvCDRhNC+0YDQvNGDINCyIERPTVxuY29uc3QgZm9ybU5ld1BsYWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX25ldy1jYXJkXCIpO1xuLy8g0J3QsNGF0L7QtNC40Lwg0L/QvtC70Y8g0YTQvtGA0LzRiyDQsiBET01cbmNvbnN0IG5hbWVQbGFjZSA9IGZvcm1OZXdQbGFjZS5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF90eXBlX2NhcmQtbmFtZVwiKTtcbmNvbnN0IGxpbmtQbGFjZSA9IGZvcm1OZXdQbGFjZS5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF90eXBlX3VybFwiKTtcblxuLy8g0J7QsdGA0LDQsdC+0YLRh9C40LogwqvQvtGC0L/RgNCw0LLQutC4wrsg0YTQvtGA0LzRiyDQtNC+0LHQsNCy0LvQtdC90LjRjyDRhNC+0YLQvlxuZnVuY3Rpb24gYWRkUGxhY2VTdWJtaXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpOyAvLyDQrdGC0LAg0YHRgtGA0L7Rh9C60LAg0L7RgtC80LXQvdGP0LXRgiDRgdGC0LDQvdC00LDRgNGC0L3Rg9GOINC+0YLQv9GA0LDQstC60YMg0YTQvtGA0LzRi1xuICAvLyDQt9C90LDRh9C10L3QuNC1INC/0L7Qu9C10Lkg0LjQvNC10L3QuCDQuCDRgdGB0YvQu9C60LAg0L3QsCDRhNC+0YLQvlxuICBjb25zdCBuYW1lID0gbmFtZVBsYWNlLnZhbHVlO1xuICBjb25zdCBsaW5rID0gbGlua1BsYWNlLnZhbHVlO1xuICBjb25zdCBuZXdQbGFjZUJ1dHRvbiA9IGZvcm1OZXdQbGFjZS5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19idXR0b25cIik7XG4gIG5ld1BsYWNlQnV0dG9uLnRleHRDb250ZW50ID0gXCLQodC+0YXRgNCw0L3QtdC90LjQtS4uLlwiO1xuICBjcmVhdGVOZXdDYXJkKG5hbWUsIGxpbmspXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgLy8g0JTQvtCx0LDQstC70Y/QtdC8INC60LDRgNGC0L7Rh9C60YNcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChcbiAgICAgICAgbGluayxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgdGhpcy5saWtlcyxcbiAgICAgICAgdXNlckluZm8uaWQsXG4gICAgICAgIHRoaXMuX2lkLFxuICAgICAgICB1c2VySW5mby5pZCxcbiAgICAgICAgZGVsZXRlQ2FyZCxcbiAgICAgICAgbGlrZUJ1dHRvbixcbiAgICAgICAgb3BlbkltYWdlXG4gICAgICApO1xuICAgICAgcGxhY2VDb250YWluZXIucHJlcGVuZChjYXJkRWxlbWVudCk7XG4gICAgICBjbG9zZVBvcHVwKGZvcm1OZXdQbGFjZSk7XG4gICAgICBuYW1lUGxhY2UudmFsdWUgPSBcIlwiO1xuICAgICAgbGlua1BsYWNlLnZhbHVlID0gXCJcIjtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgbmV3UGxhY2VCdXR0b24udGV4dENvbnRlbnQgPSBcItCh0L7RhdGA0LDQvdC40YLRjFwiO1xuICAgIH0pO1xufVxuXG4vLyDQn9GA0LjQutGA0LXQv9C70Y/QtdC8INC+0LHRgNCw0LHQvtGC0YfQuNC6INC6INGE0L7RgNC80LUg0JTQvtCx0LDQstC70LXQvdC40Y8g0YTQvtGC0L46XG4vLyDQvtC9INCx0YPQtNC10YIg0YHQu9C10LTQuNGC0Ywg0LfQsCDRgdC+0LHRi9GC0LjQtdC8IOKAnHN1Ym1pdOKAnSAtIMKr0L7RgtC/0YDQsNCy0LrQsMK7XG5mb3JtTmV3UGxhY2UuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBhZGRQbGFjZVN1Ym1pdCk7XG5cbmVuYWJsZVZhbGlkYXRpb24oKTtcblxuZXhwb3J0IHsgY2FyZFRlbXBsYXRlLCBwbGFjZUNvbnRhaW5lciB9O1xuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwib3BlblBvcHVwIiwicG9wdXAiLCJjbGFzc0xpc3QiLCJhZGQiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbG9zZVBvcHVwRXNjIiwiY2xvc2VQb3B1cCIsInJlbW92ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJxdWVyeVNlbGVjdG9yIiwiY2xvc2VQb3B1cE92ZXJsYXkiLCJjdXJyZW50VGFyZ2V0IiwidGFyZ2V0IiwiZGVsQ2FyZHMiLCJjb25maWciLCJ1cmwiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsImxpa2VCdXR0b24iLCJsaWtlcyIsImlkIiwiY2FyZEVsZW1lbnQiLCJjYXJkSWQiLCJpc0xpa2VzTWUiLCJmZXRjaCIsImNvbmNhdCIsIm1ldGhvZCIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZGVsZXRlTGlrZSIsImFkZExpa2UiLCJmaW5kIiwiaXRlbSIsIl9pZCIsImNyZWF0ZUNhcmQiLCJsaW5rIiwibmFtZSIsImlkVXNlciIsIm93bmVySWQiLCJkZWxldGVDYWxsQmFjayIsImxpa2VJbWFnZSIsIm9wZW5JbWFnZSIsImNhcmRUZW1wbGF0ZSIsImNsb25lTm9kZSIsImNhcmRJbWFnZSIsImNhcmRUaXRsZSIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiZGVsZXRlQnV0dG9uIiwic3R5bGUiLCJkaXNwbGF5IiwicG9wdXBDb25maXJtIiwiZGF0YXNldCIsImlkY2FyZCIsImRlbGV0ZUNhcmQiLCJkZWxldGVDb25maXJtQnV0dG9uIiwicmVtb3ZlQ2FyZCIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImZpbmFsbHkiLCJjb25maWdWYWxpZGF0aW9uIiwiaGlkZUVycm9yIiwiZm9ybUVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJlcnJvckVsZW1lbnQiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImlucHV0TGlzdCIsImJ1dHRvbkVsZW1lbnQiLCJzb21lIiwidmFsaWRpdHkiLCJ2YWxpZCIsImhhc0ludmFsaWRJbnB1dCIsImRpc2FibGVkIiwiY2xlYXJWYWxpZGF0aW9uIiwiZm9ybVZhbGlkYXRpb24iLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsInBvcHVwSW5wdXQiLCJzZXRDdXN0b21WYWxpZGl0eSIsImNvbnRlbnQiLCJwbGFjZUNvbnRhaW5lciIsInBvcHVwRWRpdCIsInBvcHVwQWRkIiwicG9wdXBJbWFnZSIsInBvcHVwQXZhdGFyIiwiZWRpdEJ1dHRvbiIsImFkZEJ1dHRvbiIsImF2YXRhckVkaXQiLCJjbG9zZUJ1dHRvbiIsImNsb3NlQnV0dG9uQWRkIiwiY2xvc2VCdXR0b25JbWFnZSIsImNsb3NlQnV0dG9uQ29uZmlybSIsImNsb3NlQnV0dG9uQXZhdGFyIiwibmFtZUlucHV0Iiwiam9iSW5wdXQiLCJsaW5rQXZhdGFyIiwibmFtZVByb2ZpbGUiLCJqb2JQcm9maWxlIiwiYXZhdGFyUHJvZmlsZSIsInVzZXJJbmZvIiwiaW1hZ2UiLCJ0aXRsZSIsInBvcHVwQ2FwdGlvbiIsImFsbCIsIl9yZWYiLCJfcmVmMiIsInVzZXIiLCJDYXJkcyIsImFib3V0IiwiYXZhdGFyIiwic2V0QXR0cmlidXRlIiwic2V0UHJvZmlsZSIsIm93bmVyIiwiYXBwZW5kIiwibGVuZ3RoIiwidmFsdWUiLCJpbm5lclRleHQiLCJldmVudCIsInByZXZlbnREZWZhdWx0Iiwiam9iIiwiZWRpdEluZm9CdXR0b24iLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImVkaXRJbmZvVXNlciIsImVkaXRBdmF0YXJCdXR0b24iLCJmb3JtTmV3UGxhY2UiLCJuYW1lUGxhY2UiLCJsaW5rUGxhY2UiLCJfdGhpcyIsIm5ld1BsYWNlQnV0dG9uIiwiY3JlYXRlTmV3Q2FyZCIsInByZXBlbmQiLCJwYXR0ZXJuTWlzbWF0Y2giLCJlcnJvck1lc3NhZ2UiLCJzaG93RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImNoZWNrSW5wdXRWYWxpZGl0eSIsInNldEV2ZW50TGlzdGVuZXJzIl0sInNvdXJjZVJvb3QiOiIifQ==